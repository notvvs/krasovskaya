# üå± SoilAnalyzer - AI-powered Soil Analysis Platform

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [–û –ø—Ä–æ–µ–∫—Ç–µ](#–æ-–ø—Ä–æ–µ–∫—Ç–µ)
- [–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫](#—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π-—Å—Ç–µ–∫)
- [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-–ø—Ä–æ–µ–∫—Ç–∞)
- [–ü–æ–¥—Ä–æ–±–Ω–æ –æ CNN –º–æ–¥–µ–ª–∏](#–ø–æ–¥—Ä–æ–±–Ω–æ-–æ-cnn-–º–æ–¥–µ–ª–∏)
- [–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å](#—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å)
- [–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫](#—É—Å—Ç–∞–Ω–æ–≤–∫–∞-–∏-–∑–∞–ø—É—Å–∫)
- [API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](#api-–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è)
- [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞](#—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–ø—Ä–æ–µ–∫—Ç–∞)

---

## üéØ –û –ø—Ä–æ–µ–∫—Ç–µ

**SoilAnalyzer** - —ç—Ç–æ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –≤–µ–±-–ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Ç–∏–ø–∞ –ø–æ—á–≤—ã —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç–∞ (–≥–ª—É–±–æ–∫–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è). –°–∏—Å—Ç–µ–º–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –∑–∞–≥—Ä—É–∂–∞—Ç—å —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –ø–æ—á–≤—ã –∏ –ø–æ–ª—É—á–∞—Ç—å –º–≥–Ω–æ–≤–µ–Ω–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–∞ —Å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º–∏ –ø–æ –∫—É–ª—å—Ç—É—Ä–∞–º –∏ —É–¥–æ–±—Ä–µ–Ω–∏—è–º.

### –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:

- ü§ñ **AI-–∞–Ω–∞–ª–∏–∑ –ø–æ—á–≤—ã** - –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è —Ç–∏–ø–∞ –ø–æ—á–≤—ã –ø–æ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º CNN
- üîê **–ü–æ–ª–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏** - —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è, –≤—Ö–æ–¥, email-–≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è
- üìä **–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç** - –∏—Å—Ç–æ—Ä–∏—è –∞–Ω–∞–ª–∏–∑–æ–≤, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞, –ø—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- üöÄ **–ë—ã—Å—Ç—Ä—ã–π –∞–Ω–∞–ª–∏–∑** - –ø—Ä—è–º–æ —Å –¥–∞—à–±–æ—Ä–¥–∞ –±–µ–∑ –ø–µ—Ä–µ—Ö–æ–¥–∞ –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
- üìà **–î–µ—Ç–∞–ª—å–Ω—ã–µ –æ—Ç—á–µ—Ç—ã** - –æ–ø–∏—Å–∞–Ω–∏–µ –ø–æ—á–≤—ã, —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏, —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∫—É–ª—å—Ç—É—Ä–∞–º

---

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

### Backend:
- **FastAPI** `>=0.115.5` - –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –≤–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- **Python** `3.13` - –û—Å–Ω–æ–≤–Ω–æ–π —è–∑—ã–∫ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- **SQLAlchemy** `2.0.36` - ORM –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ë–î (–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π —Ä–µ–∂–∏–º)
- **PostgreSQL** - –û—Å–Ω–æ–≤–Ω–∞—è —Ä–µ–ª—è—Ü–∏–æ–Ω–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- **Redis** - –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (verify codes)
- **JWT** - –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –Ω–∞ –±–∞–∑–µ —Ç–æ–∫–µ–Ω–æ–≤
- **Bcrypt** - –•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π

### Machine Learning:
- **TensorFlow** `>=2.15.0` - –§—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è –≥–ª—É–±–æ–∫–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è
- **Keras** - High-level API –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –Ω–µ–π—Ä–æ–Ω–Ω—ã—Ö —Å–µ—Ç–µ–π
- **NumPy** `>=1.24.0` - –†–∞–±–æ—Ç–∞ —Å –º–∞—Å—Å–∏–≤–∞–º–∏ –∏ –º–∞—Ç—Ä–∏—Ü–∞–º–∏
- **Pillow** `>=10.0.0` - –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- **Scikit-learn** `>=1.3.0` - –ú–µ—Ç—Ä–∏–∫–∏ –∏ –ø—Ä–µ–ø—Ä–æ—Ü–µ—Å—Å–∏–Ω–≥

### Frontend:
- **Tailwind CSS** - Utility-first CSS —Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- **Jinja2** `>=3.1.4` - –®–∞–±–ª–æ–Ω–∏–∑–∞—Ç–æ—Ä –¥–ª—è SSR
- **Vanilla JavaScript** - –ß–∏—Å—Ç—ã–π JS –±–µ–∑ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–æ–≤
- **Material Symbols** - –ò–∫–æ–Ω–∫–∏ –æ—Ç Google

### –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞:
- **Uvicorn** - ASGI —Å–µ—Ä–≤–µ—Ä
- **Aiosmtplib** `>=3.0.2` - –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ email
- **Asyncpg** `>=0.30.0` - –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –¥—Ä–∞–π–≤–µ—Ä –¥–ª—è PostgreSQL
- **Docker** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) - –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è

---

## üèó –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

### –û–±—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Frontend      ‚îÇ  (Jinja2 Templates + Tailwind CSS + JS)
‚îÇ   Templates     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ HTTP/HTTPS
         ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   FastAPI       ‚îÇ  ‚Üê API Router (v1)
‚îÇ   Application   ‚îÇ  ‚Üê Middleware (CORS, Auth)
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ         ‚îÇ
    ‚Üì         ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ ML     ‚îÇ ‚îÇ Auth   ‚îÇ
‚îÇService ‚îÇ ‚îÇService ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îò
    ‚îÇ          ‚îÇ
    ‚Üì          ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  PostgreSQL    ‚îÇ‚Üê‚îÄ‚îÄ‚îÄ‚îÄ‚Üí‚îÇ   Redis     ‚îÇ
‚îÇ  (User + Soil) ‚îÇ      ‚îÇ (Cache/OTP) ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –°–ª–æ–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

#### 1. **API Layer** (`app/api/`)
- **Router** - –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤
- **Endpoints** - –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ HTTP –∑–∞–ø—Ä–æ—Å–æ–≤
- **Frontend** - SSR —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü

#### 2. **Business Logic Layer** (`app/services/`)
- **ML Service** - –ó–∞–≥—Ä—É–∑–∫–∞ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ CNN –º–æ–¥–µ–ª–∏
- **JWT Service** - –°–æ–∑–¥–∞–Ω–∏–µ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–∫–µ–Ω–æ–≤
- **Email Service** - –û—Ç–ø—Ä–∞–≤–∫–∞ –ø–∏—Å–µ–º –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏
- **Redis Client** - –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ OTP –∫–æ–¥—ã

#### 3. **Data Access Layer** (`app/repository/`)
- **PostgreSQL Repository** - CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –ë–î
- **Base Repository** - –ê–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π –±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å

#### 4. **Database Layer** (`app/db/`)
- **Models** - SQLAlchemy –º–æ–¥–µ–ª–∏ (User, SoilAnalysis)
- **Session** - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏—è–º–∏ –ë–î

#### 5. **Core Layer** (`app/core/`)
- **Config** - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- **Security** - –§—É–Ω–∫—Ü–∏–∏ —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏
- **Dependencies** - DI –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä

---

## üß† –ü–æ–¥—Ä–æ–±–Ω–æ –æ CNN –º–æ–¥–µ–ª–∏

### –û–±–∑–æ—Ä –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

–ú–æ–¥–µ–ª—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **—Å–≤–µ—Ä—Ç–æ—á–Ω—É—é –Ω–µ–π—Ä–æ–Ω–Ω—É—é —Å–µ—Ç—å (CNN)** –¥–ª—è –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –ø–æ—á–≤—ã –Ω–∞ 4 –∫–ª–∞—Å—Å–∞:

1. **Alluvial soil** (–ê–ª–ª—é–≤–∏–∞–ª—å–Ω–∞—è –ø–æ—á–≤–∞)
2. **Black Soil** (–ß–µ—Ä–Ω–æ–∑–µ–º)
3. **Clay soil** (–ì–ª–∏–Ω–∏—Å—Ç–∞—è –ø–æ—á–≤–∞)
4. **Red soil** (–ö—Ä–∞—Å–Ω–∞—è –ø–æ—á–≤–∞)

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –Ω–µ–π—Ä–æ–Ω–Ω–æ–π —Å–µ—Ç–∏

```python
Model: Sequential
_________________________________________________________________
Layer (type)                Output Shape              Params
=================================================================
Conv2D-1                    (None, 222, 222, 32)      896
BatchNormalization-1        (None, 222, 222, 32)      128
MaxPooling2D-1              (None, 111, 111, 32)      0
Dropout-1                   (None, 111, 111, 32)      0

Conv2D-2                    (None, 109, 109, 64)      18,496
BatchNormalization-2        (None, 109, 109, 64)      256
MaxPooling2D-2              (None, 54, 54, 64)        0
Dropout-2                   (None, 54, 54, 64)        0

Conv2D-3                    (None, 52, 52, 128)       73,856
BatchNormalization-3        (None, 52, 52, 128)       512
MaxPooling2D-3              (None, 26, 26, 128)       0
Dropout-3                   (None, 26, 26, 128)       0

Conv2D-4                    (None, 24, 24, 256)       295,168
BatchNormalization-4        (None, 24, 24, 256)       1,024
MaxPooling2D-4              (None, 12, 12, 256)       0
Dropout-4                   (None, 12, 12, 256)       0

Flatten                     (None, 36864)             0
Dense-1                     (None, 512)               18,874,880
BatchNormalization-5        (None, 512)               2,048
Dropout-5                   (None, 512)               0
Dense-2                     (None, 256)               131,328
Dropout-6                   (None, 256)               0
Dense-3 (Output)            (None, 4)                 1,028
=================================================================
Total params: 19,399,620
Trainable params: 19,397,636
Non-trainable params: 1,984
```

### –î–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Å–ª–æ–µ–≤

#### üîπ –°–≤–µ—Ä—Ç–æ—á–Ω—ã–µ –±–ª–æ–∫–∏ (Convolutional Blocks)

**–ë–ª–æ–∫ 1:**
```python
Conv2D(32, (3, 3), activation='relu')  # 32 —Ñ–∏–ª—å—Ç—Ä–∞ 3x3
BatchNormalization()                    # –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –±–∞—Ç—á–µ–π
MaxPooling2D((2, 2))                   # –£–º–µ–Ω—å—à–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–Ω–æ—Å—Ç–∏ –≤ 2 —Ä–∞–∑–∞
Dropout(0.25)                          # –†–µ–≥—É–ª—è—Ä–∏–∑–∞—Ü–∏—è 25%
```

- **Conv2D** - –ü—Ä–∏–º–µ–Ω—è–µ—Ç 32 —Å–≤—ë—Ä—Ç–æ—á–Ω—ã—Ö —Ñ–∏–ª—å—Ç—Ä–∞ —Ä–∞–∑–º–µ—Ä–æ–º 3x3
  - –ò–∑–≤–ª–µ–∫–∞–µ—Ç –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–µ –ø—Ä–∏–∑–Ω–∞–∫–∏ (–∫—Ä–∞—è, —Ç–µ–∫—Å—Ç—É—Ä—ã)
  - ReLU –∞–∫—Ç–∏–≤–∞—Ü–∏—è: `f(x) = max(0, x)`

- **BatchNormalization** - –ù–æ—Ä–º–∞–ª–∏–∑—É–µ—Ç –≤—ã—Ö–æ–¥—ã –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —Å–ª–æ—è
  - –£—Å–∫–æ—Ä—è–µ—Ç –æ–±—É—á–µ–Ω–∏–µ
  - –£–º–µ–Ω—å—à–∞–µ—Ç internal covariate shift

- **MaxPooling2D** - –£–º–µ–Ω—å—à–∞–µ—Ç –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã
  - –°–Ω–∏–∂–∞–µ—Ç –≤—ã—á–∏—Å–ª–∏—Ç–µ–ª—å–Ω—É—é —Å–ª–æ–∂–Ω–æ—Å—Ç—å
  - –û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Ç—Ä–∞–Ω—Å–ª—è—Ü–∏–æ–Ω–Ω—É—é –∏–Ω–≤–∞—Ä–∏–∞–Ω—Ç–Ω–æ—Å—Ç—å

- **Dropout** - –°–ª—É—á–∞–π–Ω–æ –æ—Ç–∫–ª—é—á–∞–µ—Ç 25% –Ω–µ–π—Ä–æ–Ω–æ–≤
  - –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏–µ

**–ë–ª–æ–∫ 2, 3, 4** - –ê–Ω–∞–ª–æ–≥–∏—á–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å —É–≤–µ–ª–∏—á–µ–Ω–∏–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ñ–∏–ª—å—Ç—Ä–æ–≤:
- –ë–ª–æ–∫ 2: 64 —Ñ–∏–ª—å—Ç—Ä–∞
- –ë–ª–æ–∫ 3: 128 —Ñ–∏–ª—å—Ç—Ä–æ–≤
- –ë–ª–æ–∫ 4: 256 —Ñ–∏–ª—å—Ç—Ä–æ–≤ (Dropout —É–≤–µ–ª–∏—á–µ–Ω –¥–æ 0.3)

–ö–∞–∂–¥—ã–π —Å–ª–µ–¥—É—é—â–∏–π –±–ª–æ–∫ –∏–∑–≤–ª–µ–∫–∞–µ—Ç –≤—Å–µ –±–æ–ª–µ–µ –≤—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–µ –ø—Ä–∏–∑–Ω–∞–∫–∏.

#### üîπ –ü–æ–ª–Ω–æ—Å–≤—è–∑–Ω—ã–µ —Å–ª–æ–∏ (Dense Layers)

**Flatten Layer:**
```python
Flatten()  # (12, 12, 256) ‚Üí (36864,)
```
–ü—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç 3D —Ç–µ–Ω–∑–æ—Ä –≤ 1D –≤–µ–∫—Ç–æ—Ä –ø—Ä–∏–∑–Ω–∞–∫–æ–≤.

**Dense Layers:**
```python
Dense(512, activation='relu')     # –ü–µ—Ä–≤—ã–π FC —Å–ª–æ–π
BatchNormalization()
Dropout(0.5)                      # 50% dropout –¥–ª—è —Å–∏–ª—å–Ω–æ–π —Ä–µ–≥—É–ª—è—Ä–∏–∑–∞—Ü–∏–∏

Dense(256, activation='relu')     # –í—Ç–æ—Ä–æ–π FC —Å–ª–æ–π
Dropout(0.3)

Dense(4, activation='softmax')    # –í—ã—Ö–æ–¥–Ω–æ–π —Å–ª–æ–π (4 –∫–ª–∞—Å—Å–∞)
```

- **Dense(512)** - –ö–æ–º–±–∏–Ω–∏—Ä—É–µ—Ç –∏–∑–≤–ª–µ—á–µ–Ω–Ω—ã–µ –ø—Ä–∏–∑–Ω–∞–∫–∏
- **Dense(256)** - –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ —Å–∂–∞—Ç–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
- **Dense(4, softmax)** - –í—ã—Ö–æ–¥–Ω–æ–π —Å–ª–æ–π —Å –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—è–º–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–ª–∞—Å—Å–∞
  - Softmax: `œÉ(z)·µ¢ = exp(z·µ¢) / Œ£‚±º exp(z‚±º)`

### –ü—Ä–æ—Ü–µ—Å—Å –æ–±—É—á–µ–Ω–∏—è

#### –ì–∏–ø–µ—Ä–ø–∞—Ä–∞–º–µ—Ç—Ä—ã:
```python
IMG_HEIGHT = 224
IMG_WIDTH = 224
BATCH_SIZE = 32
EPOCHS = 30
LEARNING_RATE = 0.001
```

#### Data Augmentation (–∞—É–≥–º–µ–Ω—Ç–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö):
```python
ImageDataGenerator(
    rescale=1./255,              # –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è [0, 255] ‚Üí [0, 1]
    rotation_range=20,           # –°–ª—É—á–∞–π–Ω—ã–π –ø–æ–≤–æ—Ä–æ—Ç ¬±20¬∞
    width_shift_range=0.2,       # –°–¥–≤–∏–≥ –ø–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª–∏ ¬±20%
    height_shift_range=0.2,      # –°–¥–≤–∏–≥ –ø–æ –≤–µ—Ä—Ç–∏–∫–∞–ª–∏ ¬±20%
    horizontal_flip=True,        # –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –æ—Ç—Ä–∞–∂–µ–Ω–∏–µ
    vertical_flip=True,          # –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–µ –æ—Ç—Ä–∞–∂–µ–Ω–∏–µ
    zoom_range=0.2,              # –°–ª—É—á–∞–π–Ω—ã–π –∑—É–º ¬±20%
    shear_range=0.2,             # –°–¥–≤–∏–≥ (shear transformation)
    fill_mode='nearest'          # –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—É—Å—Ç—ã—Ö –ø–∏–∫—Å–µ–ª–µ–π
)
```

**–ó–∞—á–µ–º –Ω—É–∂–Ω–∞ –∞—É–≥–º–µ–Ω—Ç–∞—Ü–∏—è?**
- –£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏–µ –æ–±—É—á–∞—é—â–µ–π –≤—ã–±–æ—Ä–∫–∏
- –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏–µ
- –î–µ–ª–∞–µ—Ç –º–æ–¥–µ–ª—å –∏–Ω–≤–∞—Ä–∏–∞–Ω—Ç–Ω–æ–π –∫ –ø–æ–≤–æ—Ä–æ—Ç–∞–º, —Å–¥–≤–∏–≥–∞–º –∏ –º–∞—Å—à—Ç–∞–±—É

#### Optimizer –∏ Loss:
```python
optimizer = Adam(learning_rate=0.001)
loss = 'categorical_crossentropy'
metrics = ['accuracy']
```

- **Adam** - Adaptive Moment Estimation
  - –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π learning rate –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞
  - –ö–æ–º–±–∏–Ω–∏—Ä—É–µ—Ç –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ AdaGrad –∏ RMSProp

- **Categorical Crossentropy** - –§—É–Ω–∫—Ü–∏—è –ø–æ—Ç–µ—Ä—å –¥–ª—è –º—É–ª—å—Ç–∏–∫–ª–∞—Å—Å–æ–≤–æ–π –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏
  - –§–æ—Ä–º—É–ª–∞: `L = -Œ£·µ¢ y·µ¢ * log(≈∑·µ¢)`
  - –ì–¥–µ y·µ¢ - –∏—Å—Ç–∏–Ω–Ω–∞—è –º–µ—Ç–∫–∞, ≈∑·µ¢ - –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ

#### Callbacks (–∫–æ–ª–±—ç–∫–∏):

**1. EarlyStopping:**
```python
EarlyStopping(
    monitor='val_accuracy',      # –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º —Ç–æ—á–Ω–æ—Å—Ç—å –Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
    patience=5,                  # –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –µ—Å–ª–∏ –Ω–µ—Ç —É–ª—É—á—à–µ–Ω–∏–π 5 —ç–ø–æ—Ö
    restore_best_weights=True    # –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ª—É—á—à–∏–µ –≤–µ—Å–∞
)
```

**2. ReduceLROnPlateau:**
```python
ReduceLROnPlateau(
    monitor='val_loss',          # –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º loss –Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
    factor=0.5,                  # –£–º–µ–Ω—å—à–∞–µ–º LR –≤ 2 —Ä–∞–∑–∞
    patience=3,                  # –ü–æ—Å–ª–µ 3 —ç–ø–æ—Ö –±–µ–∑ —É–ª—É—á—à–µ–Ω–∏–π
    min_lr=1e-7                  # –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π learning rate
)
```

**3. ModelCheckpoint:**
```python
ModelCheckpoint(
    'best_model.keras',
    monitor='val_accuracy',      # –°–æ—Ö—Ä–∞–Ω—è–µ–º –ª—É—á—à—É—é –º–æ–¥–µ–ª—å
    save_best_only=True          # –¢–æ–ª—å–∫–æ –µ—Å–ª–∏ accuracy —É–ª—É—á—à–∏–ª—Å—è
)
```

### –ü—Ä–æ—Ü–µ—Å—Å –∏–Ω—Ñ–µ—Ä–µ–Ω—Å–∞ (–ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è)

#### 1. –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
```python
img = Image.open(image_path)
```

#### 2. –ü—Ä–µ–¥–æ–±—Ä–∞–±–æ—Ç–∫–∞
```python
# –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ RGB
if img.mode != "RGB":
    img = img.convert("RGB")

# –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –¥–æ 224x224
img = img.resize((224, 224))

# –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è [0, 255] ‚Üí [0, 1]
img_array = np.array(img) / 255.0

# –î–æ–±–∞–≤–ª–µ–Ω–∏–µ batch dimension (1, 224, 224, 3)
img_array = np.expand_dims(img_array, axis=0)
```

#### 3. –ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ
```python
predictions = model.predict(img_array)  # Shape: (1, 4)
```

–ü—Ä–∏–º–µ—Ä —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞:
```python
predictions = [
    [0.05, 0.82, 0.10, 0.03]  # –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–ª–∞—Å—Å–∞
    #  ^     ^     ^     ^
    #  |     |     |     ‚îî‚îÄ Red soil (3%)
    #  |     |     ‚îî‚îÄ Clay soil (10%)
    #  |     ‚îî‚îÄ Black Soil (82%) ‚Üê –ú–∞–∫—Å–∏–º—É–º!
    #  ‚îî‚îÄ Alluvial soil (5%)
]
```

#### 4. –ü–æ–ª—É—á–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
```python
predicted_class_idx = np.argmax(predictions[0])  # 1 (Black Soil)
confidence = predictions[0][predicted_class_idx]  # 0.82 (82%)
```

### –ú–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞

–ü–æ—Å–ª–µ –æ–±—É—á–µ–Ω–∏—è –º–æ–¥–µ–ª—å –¥–æ—Å—Ç–∏–≥–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤:

- **Accuracy –Ω–∞ —Ç–µ—Å—Ç–æ–≤–æ–π –≤—ã–±–æ—Ä–∫–µ**: ~85-92%
- **Loss –Ω–∞ —Ç–µ—Å—Ç–æ–≤–æ–π –≤—ã–±–æ—Ä–∫–µ**: ~0.25-0.35

**Confusion Matrix** –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–π –ø–æ –∫–ª–∞—Å—Å–∞–º.

### –£–ª—É—á—à–µ–Ω–∏—è –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Ä–∞–∑–≤–∏—Ç–∏—è

#### –¢–µ–∫—É—â–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:
- –ú–æ–¥–µ–ª—å –æ–±—É—á–µ–Ω–∞ —Ç–æ–ª—å–∫–æ –Ω–∞ 4 —Ç–∏–ø–∞—Ö –ø–æ—á–≤—ã
- –¢—Ä–µ–±—É–µ—Ç –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- –ù–µ —É—á–∏—Ç—ã–≤–∞–µ—Ç –≤–ª–∞–∂–Ω–æ—Å—Ç—å, pH –∏ –¥—Ä—É–≥–∏–µ —Ö–∏–º–∏—á–µ—Å–∫–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏

#### –í–æ–∑–º–æ–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:
1. **Transfer Learning** - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–µ–¥–æ–±—É—á–µ–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏ (ResNet, EfficientNet)
2. **–£–≤–µ–ª–∏—á–µ–Ω–∏–µ –∫–ª–∞—Å—Å–æ–≤** - –î–æ–±–∞–≤–∏—Ç—å –±–æ–ª—å—à–µ —Ç–∏–ø–æ–≤ –ø–æ—á–≤—ã
3. **Multi-modal learning** - –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏ (–≥–µ–æ–ª–æ–∫–∞—Ü–∏—è, –∫–ª–∏–º–∞—Ç)
4. **Ensemble –º–µ—Ç–æ–¥—ã** - –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –º–æ–¥–µ–ª–µ–π
5. **Attention mechanisms** - –î–æ–±–∞–≤–∏—Ç—å attention –¥–ª—è —Ñ–æ–∫—É—Å–∏—Ä–æ–≤–∫–∏ –Ω–∞ –≤–∞–∂–Ω—ã—Ö –æ–±–ª–∞—Å—Ç—è—Ö
6. **Semantic segmentation** - –°–µ–≥–º–µ–Ω—Ç–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Å–æ—Å—Ç–∞–≤–∞

---

## ‚öôÔ∏è –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

### üîê –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

#### –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è (`/register`)
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–ø–æ–ª–Ω—è–µ—Ç —Ñ–æ—Ä–º—É (username, email, password)
2. Backend –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ
3. –ü–∞—Ä–æ–ª—å —Ö–µ—à–∏—Ä—É–µ—Ç—Å—è —Å –ø–æ–º–æ—â—å—é bcrypt (cost factor = 12)
4. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è 6-–∑–Ω–∞—á–Ω—ã–π –∫–æ–¥ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏
5. –ö–æ–¥ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ Redis (TTL = 10 –º–∏–Ω—É—Ç)
6. –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è email —Å –∫–æ–¥–æ–º –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏
7. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–∑–¥–∞–µ—Ç—Å—è –≤ –ë–î —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º `is_verified=False`

#### Email –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è (`/verify`)
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç 6-–∑–Ω–∞—á–Ω—ã–π –∫–æ–¥
2. Backend –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–æ–¥ –≤ Redis
3. –ï—Å–ª–∏ –∫–æ–¥ –≤–µ—Ä–Ω—ã–π, –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è `is_verified=True` –≤ –ë–î
4. –ö–æ–¥ —É–¥–∞–ª—è–µ—Ç—Å—è –∏–∑ Redis
5. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –≤–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É

**–ü–æ–≤—Ç–æ—Ä–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –∫–æ–¥–∞** (`/resend-code`):
- –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –Ω–æ–≤—ã–π –∫–æ–¥
- –°—Ç–∞—Ä—ã–π –∫–æ–¥ —É–¥–∞–ª—è–µ—Ç—Å—è –∏–∑ Redis
- –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –Ω–æ–≤–æ–µ –ø–∏—Å—å–º–æ
- Rate limit: 1 –º–∏–Ω—É—Ç–∞ –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏ (frontend)

#### –í—Ö–æ–¥ (`/login`)
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç email –∏ –ø–∞—Ä–æ–ª—å
2. Backend –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
3. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —Å—Ç–∞—Ç—É—Å –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ email
4. –°—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç—Å—è —Ö–µ—à –ø–∞—Ä–æ–ª—è
5. –ì–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –¥–≤–∞ —Ç–æ–∫–µ–Ω–∞:
   - **Access Token** (JWT) - –ñ–∏–≤–µ—Ç 30 –º–∏–Ω—É—Ç, —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ localStorage
   - **Refresh Token** (JWT) - –ñ–∏–≤–µ—Ç 7 –¥–Ω–µ–π, —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ httpOnly cookie
6. Access token –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
7. Refresh token –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è access token

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ JWT —Ç–æ–∫–µ–Ω–∞:**
```json
{
  "sub": "user@example.com",
  "user_id": 123,
  "exp": 1733956789,
  "iat": 1733954989
}
```

#### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞ (`/refresh`)
1. Frontend –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å —Å refresh token –≤ cookie
2. Backend –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å refresh token
3. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –Ω–æ–≤–∞—è –ø–∞—Ä–∞ —Ç–æ–∫–µ–Ω–æ–≤
4. –°—Ç–∞—Ä—ã–π refresh token –∏–Ω–≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç—Å—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

#### –í—ã—Ö–æ–¥ (`logout()`)
- Frontend —É–¥–∞–ª—è–µ—Ç access token –∏–∑ localStorage
- Frontend –¥–µ–ª–∞–µ—Ç –∑–∞–ø—Ä–æ—Å –Ω–∞ —Å–µ—Ä–≤–µ—Ä –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è refresh token cookie
- –†–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ `/login`

### üì∏ –ê–Ω–∞–ª–∏–∑ –ø–æ—á–≤—ã

#### –ë—ã—Å—Ç—Ä—ã–π –∞–Ω–∞–ª–∏–∑ (Dashboard)
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç –Ω–∞ upload zone –∏–ª–∏ –∫–Ω–æ–ø–∫—É "–í—ã–±—Ä–∞—Ç—å —Ñ–∞–π–ª"
2. –í—ã–±–∏—Ä–∞–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ (JPEG, PNG)
3. –ù–∞–∂–∏–º–∞–µ—Ç "–ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø–æ—á–≤—É"
4. Frontend:
   - –°–æ–∑–¥–∞–µ—Ç FormData —Å —Ñ–∞–π–ª–æ–º
   - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç POST `/api/v1/soil/analyze` —Å Authorization header
   - –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç loading state (–∞–Ω–∏–º–∞—Ü–∏—è)
5. Backend:
   - –°–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ñ–∞–π–ª –≤ `/uploads` —Å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º UUID –∏–º–µ–Ω–µ–º
   - –í—ã–∑—ã–≤–∞–µ—Ç ML Service –¥–ª—è –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è
   - –°–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ –ë–î (—Ç–∞–±–ª–∏—Ü–∞ `soil_analyses`)
   - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∞–Ω–∞–ª–∏–∑–∞
6. Frontend –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ alert
7. –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ —Å–ø–∏—Å–æ–∫ –Ω–µ–¥–∞–≤–Ω–∏—Ö –∞–Ω–∞–ª–∏–∑–æ–≤

#### –ü–æ–ª–Ω—ã–π –∞–Ω–∞–ª–∏–∑ (`/analyze`)
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–≥—Ä—É–∂–∞–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
2. –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è preview –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
3. –ü–æ—Å–ª–µ –Ω–∞–∂–∞—Ç–∏—è "–ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å" –∏–¥–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å –∫–∞–∫ –≤—ã—à–µ
4. –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –Ω–∞ —Ç–æ–π –∂–µ —Å—Ç—Ä–∞–Ω–∏—Ü–µ:
   - –¢–∏–ø –ø–æ—á–≤—ã
   - –£—Ä–æ–≤–µ–Ω—å —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ (confidence)
   - –û–ø–∏—Å–∞–Ω–∏–µ
   - –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏
   - –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –∫—É–ª—å—Ç—É—Ä—ã
   - –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —É–¥–æ–±—Ä–µ–Ω–∏—è–º
5. –ö–Ω–æ–ø–∫–∞ "–ù–æ–≤—ã–π –∞–Ω–∞–ª–∏–∑" —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç —Ñ–æ—Ä–º—É

### üìä Dashboard

–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç:
- **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞**:
  - –í—Å–µ–≥–æ –∞–Ω–∞–ª–∏–∑–æ–≤
  - –ó–¥–æ—Ä–æ–≤—å–µ –ø–æ—á–≤—ã (—Å—Ä–µ–¥–Ω–µ–µ)
  - –ü—Ä–æ–±–ª–µ–º—ã
  - –í –æ–±—Ä–∞–±–æ—Ç–∫–µ
- **–ù–µ–¥–∞–≤–Ω–∏–µ –∞–Ω–∞–ª–∏–∑—ã** (–ø–æ—Å–ª–µ–¥–Ω–∏–µ 4-5)
- **–ë—ã—Å—Ç—Ä—ã–π –∞–Ω–∞–ª–∏–∑** (upload zone)

### üìú –ò—Å—Ç–æ—Ä–∏—è (`/history`)
- –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∞–Ω–∞–ª–∏–∑–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –¥–∞—Ç–µ
- –ü–æ–∏—Å–∫ –ø–æ —Ç–∏–ø—É –ø–æ—á–≤—ã
- Pagination (50 –∑–∞–ø–∏—Å–µ–π –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É)
- –ö–ª–∏–∫ –Ω–∞ –∞–Ω–∞–ª–∏–∑ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –¥–µ—Ç–∞–ª–∏

### üë§ –ü—Ä–æ—Ñ–∏–ª—å (`/profile`)
- Email –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Ç–∏–ø–∞–º –ø–æ—á–≤—ã (chart)
- –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–Ω–∞–ª–∏–∑–æ–≤
- –î–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤—ã—Ö–æ–¥–∞ –∏–∑ —Å–∏—Å—Ç–µ–º—ã

---

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.13+
- PostgreSQL 14+
- Redis 6+
- 4GB RAM (–¥–ª—è TensorFlow)
- SMTP —Å–µ—Ä–≤–µ—Ä (Gmail) –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ email

### –®–∞–≥ 1: –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```bash
git clone <repository-url>
cd jwttest
```

### –®–∞–≥ 2: –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
python -m venv .venv_new
source .venv_new/bin/activate  # Linux/Mac
# –∏–ª–∏
.venv_new\Scripts\activate  # Windows
```

### –®–∞–≥ 3: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
pip install -r requirements.txt
```

### –®–∞–≥ 4: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ PostgreSQL

```bash
# –°–æ–∑–¥–∞–π—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
psql -U postgres
CREATE DATABASE jwt;
CREATE USER vvs WITH PASSWORD '1202';
GRANT ALL PRIVILEGES ON DATABASE jwt TO vvs;
\q
```

### –®–∞–≥ 5: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Redis

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Redis (–µ—Å–ª–∏ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)
# Mac:
brew install redis
brew services start redis

# Ubuntu:
sudo apt update
sudo apt install redis-server
sudo systemctl start redis

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–∞—Ä–æ–ª—å
redis-cli
CONFIG SET requirepass "supersecretpassword"
AUTH supersecretpassword
exit
```

### –®–∞–≥ 6: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (.env —Ñ–∞–π–ª)

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:

```env
# JWT
SECRET_KEY=your-super-secret-key-here-min-32-chars
ACCESS_EXPIRE_MINUTES=30
REFRESH_EXPIRE_DAYS=7
ALGORITHM=HS256

# Email (Gmail)
EMAIL_USERNAME=your-email@gmail.com
EMAIL_PASSWORD=your-app-password
EMAIL_FROM=your-email@gmail.com
SMTP_SERVER=smtp.gmail.com
SMTP_PORT=587
EMAIL_USE_TLS=true

# Redis
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=supersecretpassword

# PostgreSQL
DB_HOST=localhost
DB_PORT=5432
DB_USER=vvs
DB_PASSWORD=1202
DB_NAME=jwt
```

**–ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å App Password –¥–ª—è Gmail:**
1. –í–∫–ª—é—á–∏—Ç–µ 2FA –≤ Google –∞–∫–∫–∞—É–Ω—Ç–µ
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ https://myaccount.google.com/apppasswords
3. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π App Password –¥–ª—è "Mail"
4. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–∞—Ä–æ–ª—å –≤ `EMAIL_PASSWORD`

### –®–∞–≥ 7: –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü –ë–î

```bash
python -c "
import asyncio
from app.db.session import engine, Base
from app.db.models import User, SoilAnalysis

async def create_tables():
    async with engine.begin() as conn:
        await conn.run_sync(Base.metadata.create_all)
    print('Tables created successfully!')

asyncio.run(create_tables())
"
```

### –®–∞–≥ 8: –û–±—É—á–µ–Ω–∏–µ CNN –º–æ–¥–µ–ª–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –¥–∞—Ç–∞—Å–µ—Ç:

```bash
# –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞—Ç–∞—Å–µ—Ç–∞:
# Dataset/
#   Train/
#     Alluvial soil/
#       img1.jpg, img2.jpg, ...
#     Black Soil/
#       img1.jpg, img2.jpg, ...
#     Clay soil/
#       ...
#     Red soil/
#       ...
#   test/
#     Alluvial soil/
#     Black Soil/
#     Clay soil/
#     Red soil/

python train_model.py
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –û–±—É—á–µ–Ω–Ω–∞—è –º–æ–¥–µ–ª—å –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –≤ `app/ml_model/`:
- `best_model.keras` –∏–ª–∏ `soil_classifier.keras`
- `class_mapping.json`
- `training_history.json` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### –®–∞–≥ 9: –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```bash
# Development mode (—Å hot-reload)
uvicorn app.main:app --host 0.0.0.0 --port 8000 --reload

# Production mode
uvicorn app.main:app --host 0.0.0.0 --port 8000 --workers 4
```

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É: **http://localhost:8000**

### –®–∞–≥ 10: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

1. –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:8000
2. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ email –∏ –≤–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏
4. –í–æ–π–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É
5. –ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–æ—Ç–æ –ø–æ—á–≤—ã –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞

---

## üìö API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

FastAPI –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é:

- **Swagger UI**: http://localhost:8000/docs
- **ReDoc**: http://localhost:8000/redoc

### –û—Å–Ω–æ–≤–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

#### üîê –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (`/api/v1/users`)

**POST /register**
```json
Request:
{
  "username": "john_doe",
  "email": "john@example.com",
  "password": "SecurePass123"
}

Response: 200 OK
{
  "message": "User registered. Check email for verification code.",
  "email": "john@example.com"
}
```

**POST /verify**
```json
Request:
{
  "email": "john@example.com",
  "verify_code": "123456"
}

Response: 200 OK
{
  "message": "Email verified successfully"
}
```

**POST /login**
```json
Request:
{
  "email": "john@example.com",
  "password": "SecurePass123"
}

Response: 200 OK
{
  "access_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
  "token_type": "bearer"
}
+ Set-Cookie: refresh_token=...
```

**POST /refresh**
```
Cookie: refresh_token=...

Response: 200 OK
{
  "access_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
  "token_type": "bearer"
}
+ Set-Cookie: refresh_token=...
```

**POST /resend-code**
```json
Request:
{
  "email": "john@example.com"
}

Response: 200 OK
{
  "message": "New verification code sent"
}
```

#### üå± –ê–Ω–∞–ª–∏–∑ –ø–æ—á–≤—ã (`/api/v1/soil`)

**POST /analyze** (—Ç—Ä–µ–±—É–µ—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏)
```
Authorization: Bearer <access_token>
Content-Type: multipart/form-data

file: <image file>

Response: 200 OK
{
  "id": 42,
  "soil_type": "Black Soil",
  "confidence": 0.87,
  "description": "–ß–µ—Ä–Ω–∞—è –ø–æ—á–≤–∞ (—á–µ—Ä–Ω–æ–∑–µ–º) - –±–æ–≥–∞—Ç–∞ –º–∏–Ω–µ—Ä–∞–ª–∞–º–∏",
  "characteristics": "–í—ã—Å–æ–∫–æ–µ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ –≥–ª–∏–Ω—ã, –æ—Ç–ª–∏—á–Ω–∞—è –≤–ª–∞–≥–æ—É–¥–µ—Ä–∂–∏–≤–∞—é—â–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å",
  "recommended_crops": "–•–ª–æ–ø–æ–∫, –ø–æ–¥—Å–æ–ª–Ω–µ—á–Ω–∏–∫, —Ç–∞–±–∞–∫, –∑–µ—Ä–Ω–æ–≤—ã–µ",
  "recommendations": "–î–æ–±–∞–≤–∏—Ç—å –ø–µ—Å–æ–∫ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –¥—Ä–µ–Ω–∞–∂–∞, –∞–∑–æ—Ç–Ω—ã–µ —É–¥–æ–±—Ä–µ–Ω–∏—è",
  "image_url": "/uploads/uuid-filename.jpg",
  "created_at": "2024-12-10T18:30:00"
}
```

**GET /history** (—Ç—Ä–µ–±—É–µ—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏)
```
Authorization: Bearer <access_token>
Query params: ?limit=50&offset=0

Response: 200 OK
{
  "analyses": [
    {
      "id": 42,
      "soil_type": "Black Soil",
      "confidence": 0.87,
      "image_url": "/uploads/...",
      "created_at": "2024-12-10T18:30:00"
    },
    ...
  ],
  "total": 156
}
```

**GET /stats** (—Ç—Ä–µ–±—É–µ—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏)
```
Authorization: Bearer <access_token>

Response: 200 OK
{
  "total_analyses": 156,
  "soil_type_distribution": {
    "Black Soil": 45,
    "Alluvial soil": 38,
    "Clay soil": 42,
    "Red soil": 31
  },
  "average_confidence": 0.85
}
```

**GET /image/{analysis_id}** (—Ç—Ä–µ–±—É–µ—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏)
```
Authorization: Bearer <access_token>

Response: 200 OK
Content-Type: image/jpeg

<image binary data>
```

#### üñ• Frontend —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

**GET /** - –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ (–ª–µ–Ω–¥–∏–Ω–≥)
**GET /register** - –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
**GET /login** - –°—Ç—Ä–∞–Ω–∏—Ü–∞ –≤—Ö–æ–¥–∞
**GET /verify** - –°—Ç—Ä–∞–Ω–∏—Ü–∞ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ email
**GET /dashboard** - –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç (—Ç—Ä–µ–±—É–µ—Ç auth)
**GET /analyze** - –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∞–Ω–∞–ª–∏–∑–∞ (—Ç—Ä–µ–±—É–µ—Ç auth)
**GET /history** - –ò—Å—Ç–æ—Ä–∏—è –∞–Ω–∞–ª–∏–∑–æ–≤ (—Ç—Ä–µ–±—É–µ—Ç auth)
**GET /profile** - –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (—Ç—Ä–µ–±—É–µ—Ç auth)
**GET /about** - –û –ø—Ä–æ–µ–∫—Ç–µ

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
jwttest/
‚îÇ
‚îú‚îÄ‚îÄ app/                          # –û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ api/                      # API —Ä–æ—É—Ç–µ—Ä—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ router.py             # –ì–ª–∞–≤–Ω—ã–π —Ä–æ—É—Ç–µ—Ä
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ v1/                   # API –≤–µ—Ä—Å–∏–∏ 1
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ router.py         # v1 —Ä–æ—É—Ç–µ—Ä
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ endpoints/        # –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã
‚îÇ   ‚îÇ           ‚îú‚îÄ‚îÄ users.py      # –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
‚îÇ   ‚îÇ           ‚îú‚îÄ‚îÄ soil.py       # –ê–Ω–∞–ª–∏–∑ –ø–æ—á–≤—ã
‚îÇ   ‚îÇ           ‚îî‚îÄ‚îÄ frontend.py   # SSR —Å—Ç—Ä–∞–Ω–∏—Ü—ã
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ core/                     # –Ø–¥—Ä–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ config.py             # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (Settings)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ security.py           # –•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ dependencies.py       # DI –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ db/                       # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ session.py            # –°–µ—Å—Å–∏–∏ SQLAlchemy
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ models.py             # ORM –º–æ–¥–µ–ª–∏ (User, SoilAnalysis)
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ repository/               # –°–ª–æ–π –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∞–Ω–Ω—ã–º
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ base.py               # –ë–∞–∑–æ–≤—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ postgres.py           # PostgreSQL —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ schemas/                  # Pydantic —Å—Ö–µ–º—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ user.py               # User —Å—Ö–µ–º—ã (DTO)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ soil.py               # Soil —Å—Ö–µ–º—ã (DTO)
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ services/                 # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ml_service.py         # ML —Å–µ—Ä–≤–∏—Å (CNN)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ jwt_client.py         # JWT —Ç–æ–∫–µ–Ω—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ email_service.py      # –û—Ç–ø—Ä–∞–≤–∫–∞ email
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ redis_client.py       # Redis –∫–ª–∏–µ–Ω—Ç
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ ml_model/                 # ML –º–æ–¥–µ–ª—å
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ best_model.keras      # –û–±—É—á–µ–Ω–Ω–∞—è –º–æ–¥–µ–ª—å
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ class_mapping.json    # –ú–∞–ø–ø–∏–Ω–≥ –∫–ª–∞—Å—Å–æ–≤
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ training_history.json # –ò—Å—Ç–æ—Ä–∏—è –æ–±—É—á–µ–Ω–∏—è
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ main.py                   # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ FastAPI
‚îÇ
‚îú‚îÄ‚îÄ templates/                    # Jinja2 —à–∞–±–ª–æ–Ω—ã
‚îÇ   ‚îú‚îÄ‚îÄ index.html                # –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
‚îÇ   ‚îú‚îÄ‚îÄ register.html             # –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ login.html                # –í—Ö–æ–¥
‚îÇ   ‚îú‚îÄ‚îÄ verify.html               # –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è email
‚îÇ   ‚îú‚îÄ‚îÄ dashboard.html            # Dashboard
‚îÇ   ‚îú‚îÄ‚îÄ analyze.html              # –ê–Ω–∞–ª–∏–∑ –ø–æ—á–≤—ã
‚îÇ   ‚îú‚îÄ‚îÄ history.html              # –ò—Å—Ç–æ—Ä–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ profile.html              # –ü—Ä–æ—Ñ–∏–ª—å
‚îÇ   ‚îî‚îÄ‚îÄ about.html                # –û –ø—Ä–æ–µ–∫—Ç–µ
‚îÇ
‚îú‚îÄ‚îÄ static/                       # –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã
‚îÇ   ‚îú‚îÄ‚îÄ css/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ style.css             # –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏
‚îÇ   ‚îî‚îÄ‚îÄ js/
‚îÇ       ‚îú‚îÄ‚îÄ navigation.js         # –ù–∞–≤–∏–≥–∞—Ü–∏—è –∏ auth
‚îÇ       ‚îî‚îÄ‚îÄ auth.js               # Auth —É—Ç–∏–ª–∏—Ç—ã
‚îÇ
‚îú‚îÄ‚îÄ uploads/                      # –ó–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ <uuid-filename>.jpg
‚îÇ
‚îú‚îÄ‚îÄ Dataset/                      # –î–∞—Ç–∞—Å–µ—Ç –¥–ª—è –æ–±—É—á–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ Train/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Alluvial soil/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Black Soil/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Clay soil/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Red soil/
‚îÇ   ‚îî‚îÄ‚îÄ test/
‚îÇ       ‚îî‚îÄ‚îÄ ...
‚îÇ
‚îú‚îÄ‚îÄ train_model.py                # –°–∫—Ä–∏–ø—Ç –æ–±—É—á–µ–Ω–∏—è CNN
‚îú‚îÄ‚îÄ requirements.txt              # Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ .env                          # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ README.md                     # –≠—Ç–æ—Ç —Ñ–∞–π–ª
‚îî‚îÄ‚îÄ DESIGN_BRIEF.md               # –î–∏–∑–∞–π–Ω –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

---

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ä—ã:

1. **–•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π** - Bcrypt —Å cost factor 12
2. **JWT —Ç–æ–∫–µ–Ω—ã** - Access (30 –º–∏–Ω) + Refresh (7 –¥–Ω–µ–π)
3. **HttpOnly cookies** - Refresh token –Ω–µ –¥–æ—Å—Ç—É–ø–µ–Ω –∏–∑ JS
4. **Email –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è** - 6-–∑–Ω–∞—á–Ω—ã–π OTP –∫–æ–¥
5. **Rate limiting** - –ù–∞ frontend (1 –º–∏–Ω—É—Ç–∞ –º–µ–∂–¥—É resend)
6. **CORS** - –ù–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω—ã—Ö origins
7. **SQL Injection** - –ó–∞—â–∏—Ç–∞ —á–µ—Ä–µ–∑ ORM (SQLAlchemy)
8. **XSS** - –≠–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ Jinja2 —à–∞–±–ª–æ–Ω–∞—Ö
9. **CSRF** - SameSite cookie policy

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞:

- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ HTTPS (Let's Encrypt)
- –í–∫–ª—é—á–∏—Ç–µ rate limiting –Ω–∞ —É—Ä–æ–≤–Ω–µ —Å–µ—Ä–≤–µ—Ä–∞ (Nginx)
- –î–æ–±–∞–≤—å—Ç–µ WAF (Web Application Firewall)
- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Content Security Policy (CSP)
- –õ–æ–≥–∏—Ä—É–π—Ç–µ –≤—Å–µ –ø–æ–ø—ã—Ç–∫–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- –†–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ secrets management (Vault, AWS Secrets Manager)

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### Unit —Ç–µ—Å—Ç—ã (TODO)

```bash
pytest tests/unit/
```

### Integration —Ç–µ—Å—Ç—ã (TODO)

```bash
pytest tests/integration/
```

### E2E —Ç–µ—Å—Ç—ã (TODO)

```bash
playwright test
```

---

## üìà –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:

1. **Async/Await** - –ù–µ–±–ª–æ–∫–∏—Ä—É—é—â–∏–µ I/O –æ–ø–µ—Ä–∞—Ü–∏–∏
2. **Connection pooling** - PostgreSQL –∏ Redis
3. **Lazy loading** - ML –º–æ–¥–µ–ª—å –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—Ä–æ—Å–µ
4. **Image optimization** - Resize –¥–æ 224x224 –ø–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º
5. **Database indexes** - –ù–∞ —á–∞—Å—Ç–æ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º—ã—Ö –ø–æ–ª—è—Ö
6. **Caching** - Redis –¥–ª—è OTP –∫–æ–¥–æ–≤

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:

- Prometheus + Grafana (TODO)
- Sentry –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –æ—à–∏–±–æ–∫ (TODO)
- ELK stack –¥–ª—è –ª–æ–≥–æ–≤ (TODO)

---

## üåê –î–µ–ø–ª–æ–π

### Docker

```bash
# Build
docker build -t soilanalyzer:latest .

# Run
docker-compose up -d
```

### Heroku

```bash
heroku create soilanalyzer
heroku addons:create heroku-postgresql
heroku addons:create heroku-redis
git push heroku main
```

### AWS / DigitalOcean / VPS

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Nginx –∫–∞–∫ reverse proxy
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ systemd –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–º
4. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ SSL —Å Certbot

---

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License

---

## üë®‚Äçüíª –ê–≤—Ç–æ—Ä

**VVS**

- Email: ruzikofficial@gmail.com
- GitHub: [your-github]

---

## üôè –ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏

- TensorFlow team –∑–∞ –æ—Ç–ª–∏—á–Ω—ã–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è ML
- FastAPI team –∑–∞ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –≤–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- Tailwind CSS –∑–∞ utility-first CSS –ø–æ–¥—Ö–æ–¥
- Google Material Symbols –∑–∞ –∫—Ä–∞—Å–∏–≤—ã–µ –∏–∫–æ–Ω–∫–∏

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ —É –≤–∞—Å –≤–æ–∑–Ω–∏–∫–ª–∏ –≤–æ–ø—Ä–æ—Å—ã –∏–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ [Issues](https://github.com/your-repo/issues)
2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π Issue —Å –ø–æ–¥—Ä–æ–±–Ω—ã–º –æ–ø–∏—Å–∞–Ω–∏–µ–º
3. –ù–∞–ø–∏—à–∏—Ç–µ –Ω–∞ email: ruzikofficial@gmail.com

---

**–°–¥–µ–ª–∞–Ω–æ —Å ‚ù§Ô∏è –∏ üß† AI**
